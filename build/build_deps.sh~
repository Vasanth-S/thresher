#!/bin/bash

# should be run only from thresher root directory!

BASE=$(pwd)

# build WALA
#cp build/Makefile_wala lib/WALA/Makefile
#cd lib/WALA/ && make
# build z3 
#cd $BASE/lib/z3 && python scripts/mk_make.py && cd build && make
# move z3 components where ScalaZ3 wants them
cd $BASE/lib/ScalaZ3/z3/x64/ && mkdir 4.3 && cd 4.3
mkdir lib
mkdir include
cp $BASE/lib/z3/build/libz3.so lib/
cp $BASE/lib/z3/src/api/*.h include/
# build ScalaZ3 (requires sbt version .10 or less)
cd $BASE/lib/ScalaZ3 && sbt package && sbt update